- title 'Dashboard'[]

- cache(dashboard_path) do
  %h3= 'Rankings'[]

  %table.list
    %tr
      %th= '&nbsp;'
      %th= 'Person'[]
      %th= 'Ranking'[]
      %th= 'Won'[]
      %th= 'Played'[]
      %th= 'Win %'[]
      %th{ :title => 'Goals for'[] }= 'GF'[]
      %th{ :title => 'Goals against'[] }= 'GA'[]
      %th{ :title => 'Goals for - goals against'[] }= '+/-'
      %th= '+/- ' + 'Average'[]

    - @people.each_with_index do |person, index|
      %tr{ :class => cycle('odd', 'even') }
        %td= index + 1
        %td= person.full_name
        %td= person.ranking
        %td= person.games_won
        %td= person.memberships_count
        %td= person.winning_percentage.to_s + '%'
        %td= person.goals_for
        %td= person.goals_against
        %td= person.difference
        %td= person.difference_average

  .columns
    .left-column
      #recent_games
        %h3= 'Recent games'[]
        = render :partial => 'recent_games', :locals => { :recent_games => @recent_games }

    .right-column
      #recent_games
        %h3= 'Recent games'[]
        = render :partial => 'recent_games', :locals => { :recent_games => @recent_games }

- content_for :sidebar do
  - cache(dashboard_path + '_sidebar') do
    #counts
      %p
        %label= 'Games played'[] + ':'
        = @game_count
      %p
        %label= 'Goals scored'[] + ':'
        = @goals_scored